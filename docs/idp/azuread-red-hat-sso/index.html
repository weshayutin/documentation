<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.113.0"><meta name=generator content="Relearn 5.2.3+tip"><meta name=description content><title>Configure Red Hat SSO with Azure AD as a Federated Identity Provider :: Managed OpenShift Black Belt - Unofficial Documentation</title><link href=https://mobb.ninja/docs/idp/azuread-red-hat-sso/index.xml rel=alternate type=application/rss+xml title="Managed OpenShift Black Belt - Unofficial Documentation"><link href=https://mobb.ninja/css/fontawesome-all.min.css?1688745443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fontawesome-all.min.css?1688745443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/featherlight.min.css?1688745443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/featherlight.min.css?1688745443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/auto-complete.css?1688745443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/auto-complete.css?1688745443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/perfect-scrollbar.min.css?1688745443 rel=stylesheet><link href=https://mobb.ninja/css/nucleus.css?1688745443 rel=stylesheet><link href=https://mobb.ninja/css/fonts.css?1688745443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fonts.css?1688745443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/theme.css?1688745443 rel=stylesheet><link href=https://mobb.ninja/css/theme-red.css?1688745443 rel=stylesheet id=variant-style><link href=https://mobb.ninja/css/ie.css?1688745443 rel=stylesheet><link href=https://mobb.ninja/css/variant.css?1688745443 rel=stylesheet><link href=https://mobb.ninja/css/print.css?1688745443 rel=stylesheet media=print><script src=https://mobb.ninja/js/variant.js?1688745443></script>
<script>var index_url="https://mobb.ninja/index.json",baseUriFull,root_url="https://mobb.ninja/",baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",baseUriFull="https://mobb.ninja/",window.variants&&variants.init(["red"])</script><script src=https://mobb.ninja/js/jquery.min.js?1688745443 defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WM5QQ0P3P1"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WM5QQ0P3P1",{anonymize_ip:!1})}</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=https://mobb.ninja/docs/idp/azuread-red-hat-sso/><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next" href=https://mobb.ninja/docs/idp/considerations-aad-ipd/ title="What to consider when using Azure AD as IDP? (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=https://mobb.ninja/docs/idp/ title="Configuring IDP for ROSA, OSD and ARO (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=https://mobb.ninja/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=https://mobb.ninja/docs/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=https://mobb.ninja/docs/idp/><span itemprop=name>Configuring IDP for ROSA, OSD and ARO</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=https://mobb.ninja/docs/idp/azuread-red-hat-sso/ aria-disabled=true><span itemprop=name>Configure Red Hat SSO with Azure AD as a Federated Identity Provider</span></a></li></ol></div><div class="default-animation progress"><div class=wrapper><nav id=TableOfContents><ul><li><a href=#before-you-begin>Before you Begin</a></li><li><a href=#set-the-environment>Set the Environment</a></li><li><a href=#deploy-the-operator>Deploy the Operator</a></li><li><a href=#deploy-the-database-optional>Deploy the Database (Optional)</a></li><li><a href=#deploy-the-server>Deploy the Server</a><ul><li><a href=#with-external-database>With External Database</a></li><li><a href=#with-internal-database>With Internal Database</a></li></ul></li><li><a href=#retrieve-information-about-red-hat-sso-installation>Retrieve Information About Red Hat SSO Installation</a></li><li><a href=#configure-red-hat-sso>Configure Red Hat SSO</a><ul><li><a href=#configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-ui-method>Configure Red Hat SSO as an OIDC Identity Provider for ARO (UI Method)</a></li><li><a href=#configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-crd-method>Configure Red Hat SSO as an OIDC Identity Provider for ARO (CRD Method)</a></li></ul></li><li><a href=#configure-openshift>Configure OpenShift</a><ul><li><a href=#configure-oauth-resource>Configure OAuth Resource</a></li><li><a href=#test-login-to-openshift>Test Login to OpenShift</a></li></ul></li><li><a href=#configure-azure-ad>Configure Azure AD</a><ul><li><a href=#test-login-to-openshift-with-azure-ad-credentials>Test Login to OpenShift with Azure AD Credentials</a></li></ul></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=https://mobb.ninja/tags/azure>Azure</a>
<a class=tag-link href=https://mobb.ninja/tags/keycloak>Keycloak</a>
<a class=tag-link href=https://mobb.ninja/tags/sso>SSO</a></div></div><style>.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert-warning{background-color:#fcf8e3;border-color:#fbeed5;color:#c09853}</style><p class="alert alert-warning"><b>IMPORTANT NOTE</b>: This site is not official Red Hat documentation and is provided for informational purposes only. These guides may be experimental, proof of concept, or early adoption. Officially supported documentation is available at <a href=https://docs.openshift.com target=_blank>docs.openshift.com</a> and <a href=https://access.redhat.com target=_blank>access.redhat.com</a>.</p><article class=default><h1>Configure Red Hat SSO with Azure AD as a Federated Identity Provider</h1><hr><p><b>Authors:</b>
Dustin Scott<br><b>Last Editor:</b>
Dustin Scott<br><b>Published Date:</b>
20 June 2023<br><b>Modified Date:</b> 28 June 2023</p><hr><p>This guide demonstrates how to install and configure Red Hat SSO (Keycloak) into an Azure Red Hat OpenShift (ARO) cluster. It will also also
configure the ARO cluster to use the SSO server as a mechanism to login by way of the OIDC protocol. In addition, Red Hat SSO can
federate user identities with other identity providers. We will use Azure AD as an additional identity provider to show how
this could be done.</p><p>This guide will walk through the following steps:</p><ol><li>Install Red Hat SSO into an ARO cluster</li><li>Configure Azure AD</li><li>Configure Azure AD as an identity provider in Red Hat SSO</li><li>Integrate ARO with Red Hat SSO for authentication</li></ol><h2 id=before-you-begin>Before you Begin</h2><ol><li>Please review the <a href=https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/html/server_installation_and_configuration_guide/operator target=_blank>Official Red Hat SSO Operator Documentation</a>
on this topic.</li><li>Please ensure you have stood up an ARO cluster. See the <a href=https://mobb.ninja/docs/quickstart-aro/ target=_blank>Quick Start</a>
for
to get started if needed.</li></ol><blockquote><p><strong>NOTE:</strong> there is also a Keycloak operator which is community supported. This is not covered as
part of this documentation, however if desired, you may use the Keycloak operator instead. Please
understand that the Keycloak operator does not have the same functionality and offers different API
schemas and a different set of custom resources. For more information on the Keycloak operator,
please visit <a href=https://www.keycloak.org/operator/installation target=_blank>https://www.keycloak.org/operator/installation</a>
.</p></blockquote><h2 id=set-the-environment>Set the Environment</h2><p>Set the environment variables needed in the following steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>SSO_NAMESPACE<span style=color:#f92672>=</span>keycloak
</span></span><span style=display:flex><span>AZ_REGION<span style=color:#f92672>=</span>eastus
</span></span><span style=display:flex><span>AZ_RESOURCE_GROUP<span style=color:#f92672>=</span>dscott-sso-rg
</span></span><span style=display:flex><span>AZ_VNET<span style=color:#f92672>=</span>dscott-sso-aro-vnet-eastus
</span></span><span style=display:flex><span>AZ_PRIVATE_ENDPOINT_SUBNET<span style=color:#f92672>=</span>dscott-sso-aro-machine-subnet-eastus
</span></span><span style=display:flex><span>AZ_CLUSTER_NAME<span style=color:#f92672>=</span>dscott-sso
</span></span><span style=display:flex><span>AZ_CONSOLE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>az aro show -n $AZ_CLUSTER_NAME -g $AZ_RESOURCE_GROUP --query consoleProfile.url -o tsv<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>PG_USER<span style=color:#f92672>=</span>dscott
</span></span><span style=display:flex><span>PG_PASS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;P@ssword1234&#39;</span>
</span></span></code></pre></div><h2 id=deploy-the-operator>Deploy the Operator</h2><p>Create a project where your operator will be installed to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc new-project $SSO_NAMESPACE
</span></span></code></pre></div><p>To install, first create an Operator Group for the operator:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: operators.coreos.com/v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: OperatorGroup
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: keycloak-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  targetNamespaces:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>Next, install the subscription:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: operators.coreos.com/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Subscription
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: rhsso-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  channel: stable
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  installPlanApproval: Automatic
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: rhsso-operator
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  source: redhat-operators
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  sourceNamespace: openshift-marketplace
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  startingCSV: rhsso-operator.7.6.3-opr-002
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=deploy-the-database-optional>Deploy the Database (Optional)</h2><p>It may be desirable to keep the database management to include backups and persistence
outside of the OpenShift cluster. If this is a desired configuration, then you can
create an Azure Postgres DB instance to store your Red Hat SSO data.</p><p>For reference, please see <a href=https://learn.microsoft.com/en-us/azure/postgresql/single-server/how-to-configure-privatelink-cli target=_blank>https://learn.microsoft.com/en-us/azure/postgresql/single-server/how-to-configure-privatelink-cli</a>
.</p><p>First, create the database:</p><blockquote><p><strong>NOTE</strong> Below is only a sample, be sure to replace arguments with your desired options.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>az postgres server create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -l $AZ_REGION <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -g $AZ_RESOURCE_GROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -n $AZ_CLUSTER_NAME <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -u $PG_USER <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p <span style=color:#e6db74>&#34;</span>$PG_PASS<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --sku-name GP_Gen5_2 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --ssl-enforcement Disabled <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --public-network-access Disabled <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --backup-retention <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --geo-redundant-backup Disabled <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --storage-size <span style=color:#ae81ff>10240</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --version <span style=color:#ae81ff>11</span>
</span></span></code></pre></div><p>Create a private endpoint to restrict network access to private connectivity only:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>az network private-endpoint create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name $AZ_CLUSTER_NAME-pgsql <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --resource-group $AZ_RESOURCE_GROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --vnet-name $AZ_VNET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --subnet $AZ_PRIVATE_ENDPOINT_SUBNET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --private-connection-resource-id <span style=color:#66d9ef>$(</span>az resource show -g $AZ_RESOURCE_GROUP -n $AZ_CLUSTER_NAME --resource-type <span style=color:#e6db74>&#34;Microsoft.DBforPostgreSQL/servers&#34;</span> --query <span style=color:#e6db74>&#34;id&#34;</span> -o tsv<span style=color:#66d9ef>)</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --group-id postgresqlServer <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --connection-name $AZ_CLUSTER_NAME 
</span></span></code></pre></div><p>Configure the private DNS zone for the private link connection:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>az network private-dns zone create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --resource-group $AZ_RESOURCE_GROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name <span style=color:#e6db74>&#34;privatelink.postgres.database.azure.com&#34;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>az network private-dns link vnet create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --resource-group $AZ_RESOURCE_GROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --zone-name <span style=color:#e6db74>&#34;privatelink.postgres.database.azure.com&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name $AZ_CLUSTER_NAME-pgsql <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --virtual-network $AZ_VNET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --registration-enabled false
</span></span></code></pre></div><p>Retrieve the private IP from the private link connection:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>PRIVATE_IP<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>az resource show <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --ids <span style=color:#66d9ef>$(</span>az network private-endpoint show --name $AZ_CLUSTER_NAME-pgsql --resource-group $AZ_RESOURCE_GROUP --query <span style=color:#e6db74>&#39;networkInterfaces[0].id&#39;</span> -o tsv<span style=color:#66d9ef>)</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --api-version 2019-04-01 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -o json | jq -r <span style=color:#e6db74>&#39;.properties.ipConfigurations[0].properties.privateIPAddress&#39;</span><span style=color:#e6db74>`</span>
</span></span></code></pre></div><p>Create the DNS records for the private link connection:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>az network private-dns record-set a create <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --name $AZ_CLUSTER_NAME-pgsql <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --zone-name privatelink.postgres.database.azure.com <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --resource-group $AZ_RESOURCE_GROUP
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>az network private-dns record-set a add-record <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --record-set-name $AZ_CLUSTER_NAME-pgsql <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --zone-name privatelink.postgres.database.azure.com <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --resource-group $AZ_RESOURCE_GROUP <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -a $PRIVATE_IP
</span></span></code></pre></div><h2 id=deploy-the-server>Deploy the Server</h2><h3 id=with-external-database>With External Database</h3><p>If you deployed an <a href=#deploy-the-database-optional>external database</a>
, then you can create the server and use the existing
database. Otherwise proceed to <a href=#with-internal-database>creating the server with an internal database</a>
.</p><ol><li>Create the secret with the credential information:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Secret
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: keycloak-db-secret
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>stringData:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_DATABASE: &#34;postgres&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_EXTERNAL_ADDRESS: &#34;$AZ_CLUSTER_NAME-pgsql.privatelink.postgres.database.azure.com&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_EXTERNAL_PORT: &#34;5432&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_HOST: &#34;keycloak-postgresql&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_PASSWORD: &#34;$PG_PASS&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_SUPERUSER: &#34;true&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  POSTGRES_USERNAME: &#34;$PG_USER@$AZ_CLUSTER_NAME&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>type: Opaque
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><ol start=2><li>Deploy the server:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: keycloak.org/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Keycloak
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: keycloak
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  instances: 2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  externalAccess:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: True
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  externalDatabase:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h3 id=with-internal-database>With Internal Database</h3><p>Be sure to skip this step if you deployed an <a href=#with-external-database>external database</a>
.</p><p>If you are deploying the server using an internal database, you can simply deploy the resource as
follows which will create the server as well as an instance of PostgreSQL within your cluster
as the backend database for the server:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: keycloak.org/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Keycloak
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: keycloak
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  instances: 2
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  externalAccess:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: True
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=retrieve-information-about-red-hat-sso-installation>Retrieve Information About Red Hat SSO Installation</h2><blockquote><p><strong>IMPORTANT:</strong> this sets environment variables based on the installation that are needed in future steps.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>ADMIN_USERNAME<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc -n $SSO_NAMESPACE exec -it keycloak-0 -- printenv SSO_ADMIN_USERNAME<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>ADMIN_PASSWORD<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc -n $SSO_NAMESPACE exec -it keycloak-0 -- printenv SSO_ADMIN_PASSWORD<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>ADMIN_CONSOLE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc -n $SSO_NAMESPACE get route keycloak -o json | jq -r <span style=color:#e6db74>&#39;.status.ingress[0].host&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>CALLBACK_URL_BASE<span style=color:#f92672>=</span>https://oauth-openshift.apps.<span style=color:#66d9ef>$(</span>az aro show -g $AZ_RESOURCE_GROUP -n $AZ_CLUSTER_NAME --query clusterProfile.domain -o tsv<span style=color:#66d9ef>)</span>.$AZ_REGION.aroapp.io/oauth2callback
</span></span></code></pre></div><h2 id=configure-red-hat-sso>Configure Red Hat SSO</h2><h3 id=configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-ui-method>Configure Red Hat SSO as an OIDC Identity Provider for ARO (UI Method)</h3><p>This method walks you through configuring Red Hat SSO as an OIDC provider by using the user interface. If you
would like to control your configuration via Kubernetes custom resources, please review the
<a href=#configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-crd-method>CRD Method</a>
instead.</p><ol><li>Login to the host from the <code>ADMIN_CONSOLE</code> environment variable set in the previous step using
the <code>ADMIN_USERNAME</code> and <code>ADMIN_PASSWORD</code>:</li></ol><p><img src=images/login.png alt="Login Screen"></p><ol start=2><li>Add a new realm by navigating to the top left corner, hovering over the <code>Master</code> realm (default) and clicking
<code>Add realm</code>:</li></ol><p><img src=images/add-realm.png alt="Add realm"></p><ol start=3><li>Enter your desired realm name and make note of it, as it will be used in the URLs for this realm. Be sure
that enabled is set to <code>ON</code> and then click <code>Create</code>:</li></ol><p><img src=images/add-realm-ui.png alt="Create realm"></p><ol start=4><li>Create a new client for OIDC authentication by navigating to <code>Clients > Create</code> and input your <code>Client ID</code>. Also
make sure that the Client Protocol is set to <code>openid-connect</code>. Make
note of the client ID as it will be used when configuring ARO to authenticate against the Red Hat SSO server. Once done,
click <code>Save</code>:</li></ol><p><img src=images/create-client.png alt="Create client"></p><ol start=5><li>Configure the new client by setting the following values in the <code>Settings</code> tab. Be sure to <code>Save</code> before
heading to the next step as these settings will create extra tabs in the UI for configuration:</li></ol><ul><li><strong>Login Theme</strong>: <code>rh-sso</code></li><li><strong>Access Type</strong>: <code>confidential</code></li><li><strong>Implicit Flow Enabled</strong>: <code>ON</code></li><li><strong>Service Accounts Enabled</strong>: <code>ON</code></li><li><strong>Valid Redirect URIs</strong>: <code>&lt;Value of $CALLBACK_URL_BASE from above>/ui</code>. Note that the <code>/ui</code> is a custom unique suffix that is tied to the identity provider resource</li><li><strong>Web Origins</strong>: <code>/*</code></li></ul><p><img src=images/client-settings.png alt="Client settings"></p><ol start=6><li>Ensure the <code>Credentials</code> tab has the following settings. Be sure to capture the <code>Secret</code> value for use in the next step:</li></ol><ul><li><strong>Client Authenticator</strong>: <code>Client Id and Secret</code></li><li><strong>Secret</strong>: <code>&lt;This secret is used to configure the IDP in OpenShift></code>. Note that the image below is redacted.</li></ul><p><img src=images/client-credentials.png alt="Client credentials"></p><ol start=7><li>Create the client secret. This is needed for the <code>OAuth</code> OpenShift resource to correctly
create the Red Hat SSO IDP as an OIDC provider:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc -n openshift-config create secret generic red-hat-sso-ui --from-literal<span style=color:#f92672>=</span>clientSecret<span style=color:#f92672>=</span>&lt;CLIENT_SECRET_FROM_LAST_STEP&gt;
</span></span></code></pre></div><ol start=8><li>Create a user for authentication by navigating to <code>Users > Add User</code>, fill in the information and click <code>Save</code>. Ensure
this user is <code>Enabled</code>:</li></ol><p><img src=images/user-create.png alt="User create"></p><ol start=9><li>Set a password for the user in the <code>Credentials</code> tab for the user you created. Be sure <code>Temporary</code> is
set to <code>OFF</code> and then click <code>Set Password</code>:</li></ol><p><img src=images/user-credentials-create.png alt="User credentials create"></p><h3 id=configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-crd-method>Configure Red Hat SSO as an OIDC Identity Provider for ARO (CRD Method)</h3><p>This method walks you through configuring Red Hat SSO as an OIDC provider by using native Kubernetes CRDs. If you
would like to control your configuration via the user interface instead, please review the
<a href=#configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-ui-method>UI Method</a>
.</p><ol><li>Create the realm:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: keycloak.org/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: KeycloakRealm
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  instanceSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  realm:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    realm: crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74># NOTE: you can set unmanaged to &#39;true&#39; if you intend to manage this realm via the UI
</span></span></span><span style=display:flex><span><span style=color:#e6db74># unmanaged: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><ol start=2><li>Create the client:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: keycloak.org/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: KeycloakClient
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  realmSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  client:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    clientId: aro
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    name: aro
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    description: &#34;Azure Red Hat OpenShift&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    protocol: openid-connect
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    publicClient: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    directAccessGrantsEnabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    implicitFlowEnabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    standardFlowEnabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    serviceAccountsEnabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    redirectUris:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - $CALLBACK_URL_BASE/crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    webOrigins:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - &#34;/*&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    defaultClientScopes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - acr
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - profile
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - roles
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - web-origins
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    optionalClientScopes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - address
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - microprofile-jwt
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - offline_access
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - phone
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  serviceAccountRealmRoles:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - default-roles-crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><ol start=3><li>Create the client secret. This is needed for the <code>OAuth</code> OpenShift resource to correctly
create the Red Hat SSO IDP as an OIDC provider:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc -n openshift-config create secret generic red-hat-sso-crd --from-literal<span style=color:#f92672>=</span>clientSecret<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>oc get secret keycloak-client-secret-crd -o json | jq -r <span style=color:#e6db74>&#39;.data.CLIENT_SECRET&#39;</span> | base64 -d<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><ol start=4><li>Create a user for authentication:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: keycloak.org/v1alpha1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: KeycloakUser
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: $SSO_NAMESPACE
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  realmSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      app: sso
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  user:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    username: crd-admin
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    firstName: CRD
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    lastName: Admin
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    email: crd-admin@example.com
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    credentials:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      - temporary: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        type: password
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        value: &#39;P@ssword1234&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h2 id=configure-openshift>Configure OpenShift</h2><h3 id=configure-oauth-resource>Configure OAuth Resource</h3><p>If you used the <a href=#configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-ui-method>UI Method</a>
then you can update your
<code>OAuth</code> resource as follows. Take note that if you have other identity providers configured here, you will want to
ensure that you only add a new identity provider to the YAML rather than replace it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: config.openshift.io/v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: OAuth
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: cluster
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  identityProviders:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    # NOTE: name needs to be lowercase as per https://access.redhat.com/solutions/6213561
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    # NOTE: this maps to the /ui suffix when creating the client
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - name: ui
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      mappingMethod: claim
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      type: OpenID
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      openID:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        clientID: aro
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        clientSecret:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          name: red-hat-sso-ui
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        extraScopes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - profile
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        extraAuthorizeParameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          include_granted_scopes: &#34;true&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        claims:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          preferredUsername:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - preferred_username
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          name:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          email:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        issuer: https://$ADMIN_CONSOLE/auth/realms/ui
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>If you used the <a href=#configure-red-hat-sso-as-an-oidc-identity-provider-for-aro-crd-method>CRD Method</a>
then you can update your
<code>OAuth</code> resource as follows. Take note that if you have other identity providers configured here, you will want to
ensure that you only add a new identity provider to the YAML rather than replace it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | oc apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: config.openshift.io/v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: OAuth
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: cluster
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  identityProviders:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    # NOTE: name needs to be lowercase as per https://access.redhat.com/solutions/6213561
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    # NOTE: this maps to the /ui suffix when creating the client
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - name: crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      mappingMethod: claim
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      type: OpenID
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      openID:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        clientID: aro
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        clientSecret:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          name: red-hat-sso-crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        extraScopes:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          - profile
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        extraAuthorizeParameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          include_granted_scopes: &#34;true&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        claims:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          preferredUsername:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - preferred_username
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          name:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - name
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          email:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            - email
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        issuer: https://$ADMIN_CONSOLE/auth/realms/crd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h3 id=test-login-to-openshift>Test Login to OpenShift</h3><blockquote><p><strong>IMPORTANT</strong> It takes a few minutes for the above configuration to be applied to the cluster. This is because
the authentication operator has to reconfigure and reconcile the pods that are responsible for authentication to the
cluster.</p></blockquote><p>In a web browser, navigate to the Azure Red Hat OpenShift login page. You should have this value stored
in the environment as the <code>AZ_CONSOLE</code> variable from <a href=#set-the-environment>this step</a>
.</p><blockquote><p><strong>NOTE</strong> The below image shows both the <code>crd</code> and <code>ui</code> profiles as this documentation was put together
while doing both side-by-side. You should see one or the other.</p></blockquote><p><img src=images/login-page.png alt="Login Page"></p><p>Select the appropriate provider, and input your username and password:</p><p><img src=images/login-prompt.png alt="Login Page"></p><p>Congratulations, you are now logged into the OpenShift Console with your user! Let&rsquo;s take a look at the
identities in the cluster:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc get identities
</span></span><span style=display:flex><span>NAME                                       IDP NAME   IDP USER NAME                          USER NAME          USER UID
</span></span><span style=display:flex><span>crd:de24ecb0-0475-42ce-b69b-bb3a80d6b633   crd        de24ecb0-0475-42ce-b69b-bb3a80d6b633   crd-admin          88871fcc-74d1-486f-99ca-8dae17f72834
</span></span><span style=display:flex><span>ui:7937fa9c-6231-42e0-8cd4-666990baeef7    ui         7937fa9c-6231-42e0-8cd4-666990baeef7   ui-admin           1a6a8150-5fb7-4031-a00c-5ab0a2c8c2b2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>oc get users
</span></span><span style=display:flex><span>NAME                       UID                                    FULL NAME      IDENTITIES
</span></span><span style=display:flex><span>crd-admin                  88871fcc-74d1-486f-99ca-8dae17f72834   CRD Admin      crd:de24ecb0-0475-42ce-b69b-bb3a80d6b633
</span></span><span style=display:flex><span>ui-admin                   1a6a8150-5fb7-4031-a00c-5ab0a2c8c2b2   UI Admin       ui:7937fa9c-6231-42e0-8cd4-666990baeef7
</span></span></code></pre></div><p>Just a reminder that you only have Developer permissions when logged in at this point.
If you need this user to have elevated permissions within OpenShift, you
can use standard Kubernetes RBAC procedures to assign permissions to your user.</p><h2 id=configure-azure-ad>Configure Azure AD</h2><ol><li>Login to the Red Hat SSO UI, navigate to your realm, and select <code>Identity Providers > Add Provider > Microsoft</code>:</li></ol><p><img src=images/microsoft-idp.png alt="Add Microsoft"></p><ol start=2><li>Capture the <code>Redirect URI</code> from this screen. You will need it to register Red Hat SSO as an
application in Azure AD. Once you have captured the URI, leave this screen up while we configure
Azure AD:</li></ol><p><img src=images/microsoft-redirect-uri.png alt="Microsoft Redirect URI"></p><ol start=3><li><p><a href=https://mobb.ninja/docs/idp/azuread-aro/#register-a-new-application-in-azure-ad target=_blank>Register an application in Azure AD for Red Hat SSO</a>
.<br>Be sure to use the redirect URI captured in the last step when setting this up. Also be sure to take note of the client ID
and client secret as those will be used to finish configuration in Red Hat SSO.</p></li><li><p><a href=https://mobb.ninja/docs/idp/azuread-aro/#2-configure-optional-claims target=_blank>Enable optional claims and enable necessary Microsoft Graph permissions</a>
.</p></li><li><p>Input the client ID and client secret from the application registration into the
identity provider:</p></li></ol><p><img src=images/microsoft-client-id-secret.png alt="Microsoft Redirect URI"></p><h3 id=test-login-to-openshift-with-azure-ad-credentials>Test Login to OpenShift with Azure AD Credentials</h3><p>In a web browser, navigate to the Azure Red Hat OpenShift login page. You should have this value stored
in the environment as the <code>AZ_CONSOLE</code> variable from <a href=#set-the-environment>this step</a>
.</p><blockquote><p><strong>NOTE</strong> The below image shows both the <code>crd</code> and <code>ui</code> profiles as this documentation was put together
while doing both side-by-side. You should see one or the other.</p></blockquote><p><img src=images/login-page.png alt="Login Page"></p><p>Select the appropriate provider. You should now see an option to login with your
Microsoft credentials:</p><p><img src=images/microsoft-login.png alt="Microsoft Login Page"></p><p>Congratulations, you are now logged into the OpenShift Console with your Azure AD user, using Red Hat SSO
as a federated identity source! Let&rsquo;s take a look at the identities in the cluster:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>oc get identities
</span></span><span style=display:flex><span>NAME                                       IDP NAME   IDP USER NAME                          USER NAME                         USER UID
</span></span><span style=display:flex><span>crd:de24ecb0-0475-42ce-b69b-bb3a80d6b633   crd        de24ecb0-0475-42ce-b69b-bb3a80d6b633   crd-admin                         88871fcc-74d1-486f-99ca-8dae17f72834
</span></span><span style=display:flex><span>ui:7937fa9c-6231-42e0-8cd4-666990baeef7    ui         7937fa9c-6231-42e0-8cd4-666990baeef7   ui-admin                          1a6a8150-5fb7-4031-a00c-5ab0a2c8c2b2
</span></span><span style=display:flex><span>sso:2d9a2753-f069-4286-9f1d-f1cfb80b0857   ui         2d9a2753-f069-4286-9f1d-f1cfb80b0857   dustin@mydomain.onmicrosoft.com   c856d652-b865-4c03-82a2-24fc429d08be
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>oc get users
</span></span><span style=display:flex><span>NAME                              UID                                    FULL NAME      IDENTITIES
</span></span><span style=display:flex><span>crd-admin                         88871fcc-74d1-486f-99ca-8dae17f72834   CRD Admin      crd:de24ecb0-0475-42ce-b69b-bb3a80d6b633
</span></span><span style=display:flex><span>ui-admin                          1a6a8150-5fb7-4031-a00c-5ab0a2c8c2b2   UI Admin       ui:7937fa9c-6231-42e0-8cd4-666990baeef7
</span></span><span style=display:flex><span>dustin@mydomain.onmicrosoft.com   c856d652-b865-4c03-82a2-24fc429d08be   Dustin Scott   ui:2d9a2753-f069-4286-9f1d-f1cfb80b0857
</span></span></code></pre></div><p>Just a reminder that you only have Developer permissions when logged in at this point.
If you need this user to have elevated permissions within OpenShift, you
can use standard Kubernetes RBAC procedures to assign permissions to your user.</p><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-wrapper class=default-animation><div id=header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.945}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:300;margin-top:-13px;max-width:80%;text-transform:uppercase;width:226px;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-20px;margin-left:-23.5px;width:40.5%}@media only all and (max-width:59.938em){a#logo{font-size:25px;margin-top:-3px}#logo svg{margin-bottom:-12px;margin-left:-23px}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-58px}#logo svg{margin-bottom:-62px}}</style><a id=logo href=https://mobb.ninja/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M341.52 285.56c33.65.0 82.34-6.94 82.34-47 .22-6.74.86-1.82-20.88-96.24-4.62-19.15-8.68-27.84-42.31-44.65-26.09-13.34-82.92-35.37-99.73-35.37-15.66.0-20.2 20.17-38.87 20.17-18 0-31.31-15.06-48.12-15.06-16.14.0-26.66 11-34.78 33.62-27.5 77.55-26.28 74.27-26.12 78.27.0 24.8 97.64 106.11 228.47 106.11M429 254.84c4.65 22 4.65 24.35 4.65 27.25.0 37.66-42.33 58.56-98 58.56-125.74.08-235.91-73.65-235.91-122.33a49.55 49.55.0 014.06-19.72C58.56 200.86.0 208.93.0 260.63c0 84.67 200.63 189 359.49 189 121.79.0 152.51-55.08 152.51-98.58.0-34.21-29.59-73.05-82.93-96.24"/></svg>MOBB Ninja</a></div><div class="searchbox default-animation"><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["en"]</script><script src=https://mobb.ninja/js/auto-complete.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/lunr.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/lunr.stemmer.support.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/lunr.multi.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/lunr.en.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/search.js?1688745443 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=https://mobb.ninja/><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics collapsible-menu"><li data-nav-id=/docs/ title="Documentation from the MOBB" class="dd-item parent"><input type=checkbox id=section-2f67fdc9a362fd86f1cfd4450ed56551 class=toggle checked><label for=section-2f67fdc9a362fd86f1cfd4450ed56551></label><a href=https://mobb.ninja/docs/>Documentation from the MOBB</a><ul><li data-nav-id=/docs/quickstart-aro/ title="ARO Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-aro/>ARO Quickstart</a></li><li data-nav-id=/docs/quickstart-rosa/ title="ROSA Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-rosa/>ROSA Quickstart</a></li><li data-nav-id=/docs/rosa/ title="Red Hat Openshift Service on AWS" class=dd-item><input type=checkbox id=section-d82bea3b793597b6ff01917e2ad59aae class=toggle><label for=section-d82bea3b793597b6ff01917e2ad59aae></label><a href=https://mobb.ninja/docs/rosa/>Red Hat Openshift Service on AWS</a><ul><li data-nav-id=/docs/rosa/rosa-gitops/ title="Creating ROSA Components with GitOps" class=dd-item><a href=https://mobb.ninja/docs/rosa/rosa-gitops/>Creating ROSA Components with GitOps</a></li><li data-nav-id=/docs/rosa/aws-secrets-manager-csi/ title="Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-secrets-manager-csi/>Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS</a></li><li data-nav-id=/docs/rosa/aws-efs/ title="Enabling the AWS EFS CSI Driver Operator on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-efs/>Enabling the AWS EFS CSI Driver Operator on ROSA</a></li><li data-nav-id=/docs/rosa/egress-ip/ title="Assign Consistent Egress IP for External Traffic" class=dd-item><a href=https://mobb.ninja/docs/rosa/egress-ip/>Assign Consistent Egress IP for External Traffic</a></li><li data-nav-id=/docs/rosa/gpu/ title="ROSA with Nvidia GPU Workloads" class=dd-item><a href=https://mobb.ninja/docs/rosa/gpu/>ROSA with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/rosa/external-dns/ title="External DNS for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/external-dns/>External DNS for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/aws-load-balancer-operator/ title="AWS Load Balancer Operator On ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-load-balancer-operator/>AWS Load Balancer Operator On ROSA</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-vector/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-vector/>Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector</a></li><li data-nav-id=/docs/rosa/dynamic-certificates/ title="Dynamic Certificates for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/dynamic-certificates/>Dynamic Certificates for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/static-ip-load-balancer/ title="Configure a load balancer service to use a static public IP" class=dd-item><a href=https://mobb.ninja/docs/rosa/static-ip-load-balancer/>Configure a load balancer service to use a static public IP</a></li><li data-nav-id=/docs/rosa/verify-permissions/ title="Verify Permissions for ROSA STS Deployment" class=dd-item><a href=https://mobb.ninja/docs/rosa/verify-permissions/>Verify Permissions for ROSA STS Deployment</a></li><li data-nav-id=/docs/rosa/sts-oidc-flow/ title="STS OIDC in ROSA : How it works!" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-oidc-flow/>STS OIDC in ROSA : How it works!</a></li><li data-nav-id=/docs/rosa/security-ra/ title="Security Reference Architecture for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/security-ra/>Security Reference Architecture for ROSA</a></li><li data-nav-id=/docs/rosa/custom-alertmanager-4.9/ title="Custom AlertManager in ROSA 4.9.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager-4.9/>Custom AlertManager in ROSA 4.9.x</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-sts/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-sts/>Configuring the Cluster Log Forwarder for CloudWatch Logs and STS</a></li><li data-nav-id=/docs/rosa/ack/ title="Using AWS Controllers for Kubernetes (ACK) on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/ack/>Using AWS Controllers for Kubernetes (ACK) on ROSA</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/ title="ECR Secret Operator" class=dd-item><input type=checkbox id=section-d622abc3689c39008edcc95bca0300b1 class=toggle><label for=section-d622abc3689c39008edcc95bca0300b1></label><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/>ECR Secret Operator</a><ul><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_user/ title="Create IAM user and Policy" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_user/>Create IAM user and Policy</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_assume_role/ title="Create STS Assume Role" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_assume_role/>Create STS Assume Role</a></li></ul></li><li data-nav-id=/docs/rosa/sts/ title="Deploying ROSA in STS mode" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts/>Deploying ROSA in STS mode</a></li><li data-nav-id=/docs/rosa/ecr/ title="Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr/>Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)</a></li><li data-nav-id=/docs/rosa/kms/ title="Creating a ROSA cluster in STS mode with custom KMS key" class=dd-item><a href=https://mobb.ninja/docs/rosa/kms/>Creating a ROSA cluster in STS mode with custom KMS key</a></li><li data-nav-id=/docs/rosa/cluster-metrics-to-aws-prometheus/ title="ROSA - Federating Metrics to AWS Prometheus" class=dd-item><a href=https://mobb.ninja/docs/rosa/cluster-metrics-to-aws-prometheus/>ROSA - Federating Metrics to AWS Prometheus</a></li><li data-nav-id=/docs/rosa/sts-cluster-logging-addon/ title="Work Around to fix the issue with the logging-addon on ROSA STS Clusters" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-cluster-logging-addon/>Work Around to fix the issue with the logging-addon on ROSA STS Clusters</a></li><li data-nav-id=/docs/rosa/federated-metrics-prometheus/ title="Federating Metrics to a centralized Prometheus Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics-prometheus/>Federating Metrics to a centralized Prometheus Cluster</a></li><li data-nav-id=/docs/rosa/custom-alertmanager/ title="Custom Alerts in ROSA 4.11.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager/>Custom Alerts in ROSA 4.11.x</a></li><li data-nav-id=/docs/rosa/using-sts-with-aws-services/ title="Extending ROSA STS to include authentication with AWS Services" class=dd-item><a href=https://mobb.ninja/docs/rosa/using-sts-with-aws-services/>Extending ROSA STS to include authentication with AWS Services</a></li><li data-nav-id=/docs/rosa/sts-and-pod-identity/ title="Integrating with AWS resources using Pod Identity" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-and-pod-identity/>Integrating with AWS resources using Pod Identity</a></li><li data-nav-id=/docs/rosa/metrics-to-cloudwatch-agent/ title="Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/metrics-to-cloudwatch-agent/>Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA</a></li><li data-nav-id=/docs/rosa/sts-with-private-link/ title="Creating a ROSA cluster with Private Link enabled (custom VPC) and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-with-private-link/>Creating a ROSA cluster with Private Link enabled (custom VPC) and STS</a></li><li data-nav-id=/docs/rosa/waf/ title="Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS" class=dd-item><input type=checkbox id=section-6293c009b4929ddbd0c9b2918068ea94 class=toggle><label for=section-6293c009b4929ddbd0c9b2918068ea94></label><a href=https://mobb.ninja/docs/rosa/waf/>Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS</a><ul><li data-nav-id=/docs/rosa/waf/alb/ title="AWS ALB" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/alb/>AWS ALB</a></li><li data-nav-id=/docs/rosa/waf/readme-complex/ title="This is a POC of ROSA with a AWS WAF service" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/readme-complex/>This is a POC of ROSA with a AWS WAF service</a></li><li data-nav-id=/docs/rosa/waf/cloud-front/ title="Using CloudFront + WAF" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/cloud-front/>Using CloudFront + WAF</a></li></ul></li><li data-nav-id=/docs/rosa/byo-vpc/ title="Creating a Public/Private BYO VPC for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/byo-vpc/>Creating a Public/Private BYO VPC for ROSA</a></li><li data-nav-id=/docs/rosa/private-link/ title="Creating a ROSA cluster with Private Link enabled" class=dd-item><input type=checkbox id=section-71f53e8bae0a034c83f5c2f0c7c9c315 class=toggle><label for=section-71f53e8bae0a034c83f5c2f0c7c9c315></label><a href=https://mobb.ninja/docs/rosa/private-link/>Creating a ROSA cluster with Private Link enabled</a><ul><li data-nav-id=/docs/rosa/private-link/public-ingress/ title="Adding a Public Ingress endpoint to a ROSA Private-Link Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/private-link/public-ingress/>Adding a Public Ingress endpoint to a ROSA Private-Link Cluster</a></li></ul></li><li data-nav-id=/docs/rosa/federated-metrics/ title="Federating System and User metrics to S3 in Red Hat OpenShift for AWS" class=dd-item><input type=checkbox id=section-9567eab834a47ae397393da72ca0280d class=toggle><label for=section-9567eab834a47ae397393da72ca0280d></label><a href=https://mobb.ninja/docs/rosa/federated-metrics/>Federating System and User metrics to S3 in Red Hat OpenShift for AWS</a><ul><li data-nav-id=/docs/rosa/federated-metrics/user-defined/ title="User Workload Monitoring on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics/user-defined/>User Workload Monitoring on Azure Red Hat OpenShift</a></li></ul></li></ul></li><li data-nav-id=/docs/aro/ title="Azure Red Hat OpenShift" class=dd-item><input type=checkbox id=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a class=toggle><label for=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a></label><a href=https://mobb.ninja/docs/aro/>Azure Red Hat OpenShift</a><ul><li data-nav-id=/docs/aro/private_endpoint/ title="Configure a Private ARO cluster with Azure File via a Private Endpoint" class=dd-item><a href=https://mobb.ninja/docs/aro/private_endpoint/>Configure a Private ARO cluster with Azure File via a Private Endpoint</a></li><li data-nav-id=/docs/aro/aro-acr/ title="Using Azure Container Registry in Private ARO clusters" class=dd-item><a href=https://mobb.ninja/docs/aro/aro-acr/>Using Azure Container Registry in Private ARO clusters</a></li><li data-nav-id=/docs/aro/frontdoor/ title="Azure Front Door with ARO ( Azure Red Hat OpenShift )" class=dd-item><a href=https://mobb.ninja/docs/aro/frontdoor/>Azure Front Door with ARO ( Azure Red Hat OpenShift )</a></li><li data-nav-id=/docs/aro/vpn/ title="Setup a VPN Connection into an ARO Cluster with OpenVPN" class=dd-item><a href=https://mobb.ninja/docs/aro/vpn/>Setup a VPN Connection into an ARO Cluster with OpenVPN</a></li><li data-nav-id=/docs/aro/clf-to-azure/ title="Using Cluster Logging Forwarder in ARO with Azure Monitor" class=dd-item><a href=https://mobb.ninja/docs/aro/clf-to-azure/>Using Cluster Logging Forwarder in ARO with Azure Monitor</a></li><li data-nav-id=/docs/aro/upgrade-disconnected-aro/ title="Upgrade a disconnected ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/upgrade-disconnected-aro/>Upgrade a disconnected ARO cluster</a></li><li data-nav-id=/docs/aro/aro-machinesets/readme/ title="Helm Chart to set up extra MachineSets on ARO clusters" class=dd-item><a href=https://mobb.ninja/docs/aro/aro-machinesets/readme/>Helm Chart to set up extra MachineSets on ARO clusters</a></li><li data-nav-id=/docs/aro/azure-arc-integration/ title="Integrating Azure ARC with ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-arc-integration/>Integrating Azure ARC with ARO</a></li><li data-nav-id=/docs/aro/shipping-logs-and-metrics-to-azure-blob/ title="Shipping logs and metrics to Azure Blob storage" class=dd-item><a href=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/>Shipping logs and metrics to Azure Blob storage</a></li><li data-nav-id=/docs/aro/azure-service-operator/ title="Azure Service Operator" class=dd-item><input type=checkbox id=section-c4973928d95ad0b6b86b8742709cea9d class=toggle><label for=section-c4973928d95ad0b6b86b8742709cea9d></label><a href=https://mobb.ninja/docs/aro/azure-service-operator/>Azure Service Operator</a><ul><li data-nav-id=/docs/aro/azure-service-operator/v1/ title="Azure Service Operator V1 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v1/>Azure Service Operator V1 in ARO</a></li><li data-nav-id=/docs/aro/azure-service-operator/v2/ title="Azure Service Operator V2 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v2/>Azure Service Operator V2 in ARO</a></li></ul></li><li data-nav-id=/docs/aro/setup-quay/ title="Quay on ARO" class=dd-item><input type=checkbox id=section-107cd49f6d91378e87d08e36d5f67445 class=toggle><label for=section-107cd49f6d91378e87d08e36d5f67445></label><a href=https://mobb.ninja/docs/aro/setup-quay/>Quay on ARO</a><ul><li data-nav-id=/docs/aro/setup-quay/quay-console/ title="Setting up Quay on an ARO cluster via Console" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-console/>Setting up Quay on an ARO cluster via Console</a></li><li data-nav-id=/docs/aro/setup-quay/quay-cli/ title="Setting up Quay on an ARO cluster via CLI" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-cli/>Setting up Quay on an ARO cluster via CLI</a></li></ul></li><li data-nav-id=/docs/aro/add-infra-nodes/ title="Adding infrastructure nodes to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/add-infra-nodes/>Adding infrastructure nodes to an ARO cluster</a></li><li data-nav-id=/docs/aro/azure-policy/ title="Apply Azure Policy to Azure Policy" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-policy/>Apply Azure Policy to Azure Policy</a></li><li data-nav-id=/docs/aro/registry/ title="Accessing the Internal Registry from ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/registry/>Accessing the Internal Registry from ARO</a></li><li data-nav-id=/docs/aro/odf/ title="Configure ARO with OpenShift Data Foundation" class=dd-item><a href=https://mobb.ninja/docs/aro/odf/>Configure ARO with OpenShift Data Foundation</a></li><li data-nav-id=/docs/aro/gpu/ title="ARO with Nvidia GPU Workloads" class=dd-item><a href=https://mobb.ninja/docs/aro/gpu/>ARO with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/aro/cert-manager/ title="ARO Custom domain with cert-manager and LetsEncrypt" class=dd-item><a href=https://mobb.ninja/docs/aro/cert-manager/>ARO Custom domain with cert-manager and LetsEncrypt</a></li><li data-nav-id=/docs/aro/ibm-cloud-paks-for-data/ title="ARO IBM Cloud Paks 4 Data" class=dd-item><a href=https://mobb.ninja/docs/aro/ibm-cloud-paks-for-data/>ARO IBM Cloud Paks 4 Data</a></li><li data-nav-id=/docs/aro/trident/ title="Trident NetApp operator setup for Azure NetApp files" class=dd-item><a href=https://mobb.ninja/docs/aro/trident/>Trident NetApp operator setup for Azure NetApp files</a></li><li data-nav-id=/docs/aro/managed-upgrade-operator/ title="Enable the Managed Upgrade Operator in ARO and schedule Upgrades" class=dd-item><a href=https://mobb.ninja/docs/aro/managed-upgrade-operator/>Enable the Managed Upgrade Operator in ARO and schedule Upgrades</a></li><li data-nav-id=/docs/aro/additional-ingress-controller/ title="Adding an additional ingress controller to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/additional-ingress-controller/>Adding an additional ingress controller to an ARO cluster</a></li><li data-nav-id=/docs/aro/ocm/ title="Registering an ARO cluster to OpenShift Cluster Manager" class=dd-item><a href=https://mobb.ninja/docs/aro/ocm/>Registering an ARO cluster to OpenShift Cluster Manager</a></li><li data-nav-id=/docs/aro/disaster-recovery/ title="ARO - Considerations for Disaster Recovery" class=dd-item><a href=https://mobb.ninja/docs/aro/disaster-recovery/>ARO - Considerations for Disaster Recovery</a></li><li data-nav-id=/docs/aro/private-cluster/ title="Private ARO Cluster with access via JumpHost" class=dd-item><a href=https://mobb.ninja/docs/aro/private-cluster/>Private ARO Cluster with access via JumpHost</a></li><li data-nav-id=/docs/aro/egress-ipam-operator/ title="Using the Egressip Ipam Operator with a Private ARO Cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/egress-ipam-operator/>Using the Egressip Ipam Operator with a Private ARO Cluster</a></li><li data-nav-id=/docs/aro/federated-metrics/ title="Federating System and User metrics to Azure Files in Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/aro/federated-metrics/>Federating System and User metrics to Azure Files in Azure Red Hat OpenShift</a></li><li data-nav-id=/docs/aro/astronomer/ title="Installing Astronomer on a private ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/astronomer/>Installing Astronomer on a private ARO cluster</a></li></ul></li><li data-nav-id=/docs/misc/ title=Miscellaneous class=dd-item><input type=checkbox id=section-4743293995ef089d075c101a4e477e5c class=toggle><label for=section-4743293995ef089d075c101a4e477e5c></label><a href=https://mobb.ninja/docs/misc/>Miscellaneous</a><ul><li data-nav-id=/docs/misc/cost-management/ title="Red Hat Cost Management for Cloud Services" class=dd-item><a href=https://mobb.ninja/docs/misc/cost-management/>Red Hat Cost Management for Cloud Services</a></li><li data-nav-id=/docs/misc/azure-dev-ops-with-managed-openshift/ title="Azure DevOps with Managed OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/azure-dev-ops-with-managed-openshift/>Azure DevOps with Managed OpenShift</a></li><li data-nav-id=/docs/misc/oadp/ title="MOBB Docs and Guides - oadp" class=dd-item><input type=checkbox id=section-325dd7bf30613094ac338d7da82aacea class=toggle><label for=section-325dd7bf30613094ac338d7da82aacea></label><a href=https://mobb.ninja/docs/misc/oadp/>MOBB Docs and Guides - oadp</a><ul><li data-nav-id=/docs/misc/oadp/rosa-sts/ title="Deploying OpenShift API for Data Protection on a ROSA cluster" class=dd-item><a href=https://mobb.ninja/docs/misc/oadp/rosa-sts/>Deploying OpenShift API for Data Protection on a ROSA cluster</a></li></ul></li><li data-nav-id=/docs/misc/tls-cipher-customization/ title="Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers" class=dd-item><a href=https://mobb.ninja/docs/misc/tls-cipher-customization/>Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers</a></li><li data-nav-id=/docs/misc/jup/ title="Jupyter Notebooks" class=dd-item><input type=checkbox id=section-7af6414e26181825f2ee42d2fad956be class=toggle><label for=section-7af6414e26181825f2ee42d2fad956be></label><a href=https://mobb.ninja/docs/misc/jup/>Jupyter Notebooks</a><ul><li data-nav-id=/docs/misc/jup/buildnotebook/ title="How to deploy Jupyter Notebook" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/buildnotebook/>How to deploy Jupyter Notebook</a></li><li data-nav-id=/docs/misc/jup/opendatahub-gpu/ title="Installing the Open Data Hub Operator" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/opendatahub-gpu/>Installing the Open Data Hub Operator</a></li></ul></li><li data-nav-id=/docs/misc/default-router-custom-domain/ title="Stop default router from serving custom domain routes" class=dd-item><a href=https://mobb.ninja/docs/misc/default-router-custom-domain/>Stop default router from serving custom domain routes</a></li><li data-nav-id=/docs/misc/secrets-store-csi/ title="Installing the Kubernetes Secret Store CSI on OpenShift" class=dd-item><input type=checkbox id=section-83dcfc1bac9347003164dd6ca6bb9da6 class=toggle><label for=section-83dcfc1bac9347003164dd6ca6bb9da6></label><a href=https://mobb.ninja/docs/misc/secrets-store-csi/>Installing the Kubernetes Secret Store CSI on OpenShift</a><ul><li data-nav-id=/docs/misc/secrets-store-csi/hashicorp-vault/ title="Installing the HashiCorp Vault Secret CSI Driver" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/hashicorp-vault/>Installing the HashiCorp Vault Secret CSI Driver</a></li><li data-nav-id=/docs/misc/secrets-store-csi/azure-key-vault/ title="Azure Key Vault CSI on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/azure-key-vault/>Azure Key Vault CSI on Azure Red Hat OpenShift</a></li></ul></li><li data-nav-id=/docs/misc/common-images-namespace/ title="OpenShift - Sharing Common images" class=dd-item><a href=https://mobb.ninja/docs/misc/common-images-namespace/>OpenShift - Sharing Common images</a></li><li data-nav-id=/docs/misc/references/ title="Common Managed OpenShift References / Tasks" class=dd-item><a href=https://mobb.ninja/docs/misc/references/>Common Managed OpenShift References / Tasks</a></li></ul></li><li data-nav-id=/docs/o11y/ title=Observability class=dd-item><input type=checkbox id=section-cf64d50e30bf8c808e1a384a9dd9f94e class=toggle><label for=section-cf64d50e30bf8c808e1a384a9dd9f94e></label><a href=https://mobb.ninja/docs/o11y/>Observability</a><ul><li data-nav-id=/docs/o11y/openshift-logging/ title="OpenShift Logging" class=dd-item><a href=https://mobb.ninja/docs/o11y/openshift-logging/>OpenShift Logging</a></li><li data-nav-id=/docs/o11y/az-log-analytics/ title="Shipping logs to Azure Log Analytics" class=dd-item><a href=https://mobb.ninja/docs/o11y/az-log-analytics/>Shipping logs to Azure Log Analytics</a></li></ul></li><li data-nav-id=/docs/redhat/ title="Other Red Hat Products" class=dd-item><input type=checkbox id=section-61ee77d4a0d9667d2a6b99ce46059f1d class=toggle><label for=section-61ee77d4a0d9667d2a6b99ce46059f1d></label><a href=https://mobb.ninja/docs/redhat/>Other Red Hat Products</a><ul><li data-nav-id=/docs/redhat/rhacs/ title="Deploying Red Hat Advanced Cluster Security in ARO/ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/rhacs/>Deploying Red Hat Advanced Cluster Security in ARO/ROSA</a></li><li data-nav-id=/docs/redhat/acm/ title="Advanced Cluster Management" class=dd-item><input type=checkbox id=section-d7942abe72cdf38022f3b7c824316905 class=toggle><label for=section-d7942abe72cdf38022f3b7c824316905></label><a href=https://mobb.ninja/docs/redhat/acm/>Advanced Cluster Management</a><ul><li data-nav-id=/docs/redhat/acm/submariner/ title="Advanced Cluster Management - Submariner" class=dd-item><input type=checkbox id=section-8144b1f974c3fa53914395fa7463b3ee class=toggle><label for=section-8144b1f974c3fa53914395fa7463b3ee></label><a href=https://mobb.ninja/docs/redhat/acm/submariner/>Advanced Cluster Management - Submariner</a><ul><li data-nav-id=/docs/redhat/acm/submariner/aro/ title="Deploy ACM Submariner for connect overlay networks ARO - ROSA clusters" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/submariner/aro/>Deploy ACM Submariner for connect overlay networks ARO - ROSA clusters</a></li><li data-nav-id=/docs/redhat/acm/submariner/rosa/ title="Deploy ACM Submariner for connect overlay networks of ROSA clusters" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/submariner/rosa/>Deploy ACM Submariner for connect overlay networks of ROSA clusters</a></li></ul></li><li data-nav-id=/docs/redhat/acm/observability/ title="Advanced Cluster Management - Observability" class=dd-item><input type=checkbox id=section-16c8cbcc1de529ce480045089e9bde5c class=toggle><label for=section-16c8cbcc1de529ce480045089e9bde5c></label><a href=https://mobb.ninja/docs/redhat/acm/observability/>Advanced Cluster Management - Observability</a><ul><li data-nav-id=/docs/redhat/acm/observability/rosa/ title="Advanced Cluster Management Observability on ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/observability/rosa/>Advanced Cluster Management Observability on ROSA</a></li></ul></li></ul></li><li data-nav-id=/docs/redhat/crane/ title="Migrate Kubernetes Applications with Konveyer Crane" class=dd-item><a href=https://mobb.ninja/docs/redhat/crane/>Migrate Kubernetes Applications with Konveyer Crane</a></li><li data-nav-id=/docs/redhat/3scale/ title="Deploying 3scale API Management to ROSA and OSD" class=dd-item><a href=https://mobb.ninja/docs/redhat/3scale/>Deploying 3scale API Management to ROSA and OSD</a></li><li data-nav-id=/docs/redhat/gitops/ title="Demonstrate GitOps on Managed OpenShift with ArgoCD" class=dd-item><a href=https://mobb.ninja/docs/redhat/gitops/>Demonstrate GitOps on Managed OpenShift with ArgoCD</a></li></ul></li><li data-nav-id=/docs/gcp/ title="OSD on Google Cloud" class=dd-item><input type=checkbox id=section-34c34dd71fe103bc20cfa9eed6fa905c class=toggle><label for=section-34c34dd71fe103bc20cfa9eed6fa905c></label><a href=https://mobb.ninja/docs/gcp/>OSD on Google Cloud</a><ul><li data-nav-id=/docs/gcp/osd_preexisting_vpc/ title="Creating a OSD in GCP with Existing VPCs" class=dd-item><a href=https://mobb.ninja/docs/gcp/osd_preexisting_vpc/>Creating a OSD in GCP with Existing VPCs</a></li><li data-nav-id=/docs/gcp/filestore/ title="Create Filestore Storage for OSD in GCP" class=dd-item><a href=https://mobb.ninja/docs/gcp/filestore/>Create Filestore Storage for OSD in GCP</a></li></ul></li><li data-nav-id=/docs/idp/ title="Configuring IDP for ROSA, OSD and ARO" class="dd-item parent"><input type=checkbox id=section-de867ba7872b33ba38d343e5be5e3e1c class=toggle checked><label for=section-de867ba7872b33ba38d343e5be5e3e1c></label><a href=https://mobb.ninja/docs/idp/>Configuring IDP for ROSA, OSD and ARO</a><ul><li data-nav-id=/docs/idp/azuread-red-hat-sso/ title="Configure Red Hat SSO with Azure AD as a Federated Identity Provider" class="dd-item active"><a href=https://mobb.ninja/docs/idp/azuread-red-hat-sso/>Configure Red Hat SSO with Azure AD as a Federated Identity Provider</a></li><li data-nav-id=/docs/idp/considerations-aad-ipd/ title="What to consider when using Azure AD as IDP?" class=dd-item><a href=https://mobb.ninja/docs/idp/considerations-aad-ipd/>What to consider when using Azure AD as IDP?</a></li><li data-nav-id=/docs/idp/azuread-aro-cli/ title="Configure Azure AD as an OIDC identity provider for ARO with cli" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro-cli/>Configure Azure AD as an OIDC identity provider for ARO with cli</a></li><li data-nav-id=/docs/idp/azuread-aro/ title="Configure ARO to use Azure AD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro/>Configure ARO to use Azure AD</a></li><li data-nav-id=/docs/idp/azuread/ title="Configure Azure AD as an OIDC identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread/>Configure Azure AD as an OIDC identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/group-claims/ title="MOBB Docs and Guides - group-claims" class=dd-item><input type=checkbox id=section-af199904c6a78739e6598ab72890c976 class=toggle><label for=section-af199904c6a78739e6598ab72890c976></label><a href=https://mobb.ninja/docs/idp/group-claims/>MOBB Docs and Guides - group-claims</a><ul><li data-nav-id=/docs/idp/group-claims/aro/ title="Configure ARO to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/aro/>Configure ARO to use Azure AD Group Claims</a></li><li data-nav-id=/docs/idp/group-claims/rosa/ title="Configure ROSA to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/rosa/>Configure ROSA to use Azure AD Group Claims</a></li></ul></li><li data-nav-id=/docs/idp/okta-grp-sync/ title="Using Group Sync Operator with Okta and ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/okta-grp-sync/>Using Group Sync Operator with Okta and ROSA/OSD</a></li><li data-nav-id=/docs/idp/gitlab-aro/ title="Configure GitLab as an identity provider for ARO" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab-aro/>Configure GitLab as an identity provider for ARO</a></li><li data-nav-id=/docs/idp/gitlab/ title="Configure GitLab as an identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab/>Configure GitLab as an identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/az-ad-grp-sync/ title="Using Group Sync Operator with Azure Active Directory and ROSA" class=dd-item><a href=https://mobb.ninja/docs/idp/az-ad-grp-sync/>Using Group Sync Operator with Azure Active Directory and ROSA</a></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title></div><ul><li><a class=padding href=https://github.com/rh-mobb/documentation target=_blank><i class='fab fa-fw fa-github'></i> Github</a></li><li><a class=padding href=https://github.com/rh-mobb/documentation/archive/refs/heads/main.zip target=_blank><i class='fas fa-fw fa-file-download'></i> Download</a></li><li><a class=padding href=https://www.redhat.com/en/blog target=_blank><i class='fab fa-fw fa-redhat'></i> Red Hat Blog</a></li><li><a class=padding href=https://www.redhat.com/en/contact target=_blank><i class='fas fa-fw fa-user-md'></i> Contact Us</a></li><li><a class=padding href=https://mobb.ninja/tags/ target=_blank><i class='fas fa-fw fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><a class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></a></li><li id=select-variant-container class=footerVariantSwitch><a class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=red value=red selected>Red</option></select></div><div class=select-clear></div></a><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><a class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://mobb.ninja/js/clipboard.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/perfect-scrollbar.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/featherlight.min.js?1688745443 defer></script>
<script src=https://mobb.ninja/js/theme.js?1688745443 defer></script></body></html>